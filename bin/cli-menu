#!/usr/bin/env node

// Clean decoupled approach with explicit config management
import { ConsoleMenu, ConfigManager } from '../lib/console-menu.js';

ConsoleMenu.new({
	menu: {
		root: [
			["Database Operations", "menu", "dbMenu"],
			["Debug Menu", "menu", "debugMenu"],
			["System Info", "exec", "uname -a"],
			["Quit", "exec", "quit"]
		],
		dbMenu: [
			["Authenticate to Supabase", "exec", "npx supabase login"],
			["Link to Supabase", "exec", "npx supabase link"],
			["Generate types", "exec", "npm run db:generate"],
			["List branches", "exec", "npx supabase branches list"],
			["Show Tables", "exec", "npx supabase branches switch"],
		],
		debugMenu: [
			["ğŸ› Show Variables", "debug", "vars"],
			["ğŸ› Show Config Details", "debug", "config"], 
			["ğŸ› Show Environment", "debug", "env"],
			["ğŸ› Show Menu Structure", "debug", "menu"],
			["ğŸ› Show All Debug Info", "debug", "all"],
		]
	}, 
	cfg: new ConfigManager({
		file: "./devops-config.json",
		load: ['.env']
	})
}).exec().catch(console.error);

